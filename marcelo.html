<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Marcelo's Stuff</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4a6fa5">
  <meta name="msapplication-navbutton-color" content="#4a6fa5">
  <link rel="shortcut icon" href="./favicon.ico">
  <link href="./style.css" rel="stylesheet" type="text/css">
</head>
<body>
  <!-- Debug Window -->
  <div id="debug-window" class="window" style="position: fixed; top: 10px; right: 10px; width: 280px; z-index: 9999; font-family: monospace; font-size: 10px; display: none;">
    <div class="title-bar"><span class="title">DEBUG</span></div>
    <div class="window-inner" style="padding: 8px; max-height: 300px; overflow-y: auto;">
      <div style="margin-bottom: 8px; border-bottom: 1px solid #000; padding-bottom: 4px;"><strong>Cursor</strong></div>
      <div>cursorX: <span id="debug-cursorX">0</span></div>
      <div>cursorY: <span id="debug-cursorY">0</span></div>
      <div>screenWidth: <span id="debug-screenWidth">0</span></div>
      <div style="margin: 8px 0; border-bottom: 1px solid #000; padding-bottom: 4px;"><strong>Global X</strong></div>
      <div>globalNormX: <span id="debug-globalNormX">0</span></div>
      <div>globalCurvedX: <span id="debug-globalCurvedX">0</span></div>
      <div style="margin: 8px 0; border-bottom: 1px solid #000; padding-bottom: 4px;"><strong>Window (first title bar)</strong></div>
      <div>centerX: <span id="debug-centerX">0</span></div>
      <div>centerY: <span id="debug-centerY">0</span></div>
      <div>distX: <span id="debug-distX">0</span></div>
      <div>distY: <span id="debug-distY">0</span></div>
      <div>influenceX: <span id="debug-influenceX">0</span></div>
      <div>influenceY: <span id="debug-influenceY">0</span></div>
      <div>influence (combined): <span id="debug-influence">0</span></div>
      <div style="margin: 8px 0; border-bottom: 1px solid #000; padding-bottom: 4px; color: #00f;"><strong>FINAL</strong></div>
      <div>gradPos: <span id="debug-gradPos" style="font-weight: bold; color: #00f;">90</span></div>
    </div>
  </div>

  <div id="wrapper">
    <div id="anchor">
      <!-- Header with glow wrapper -->
      <div class="header-wrapper">
        <div class="header-glow"></div>
        <div id="head">Marcelo's Stuff</div>
      </div>
      <br>
      <a id="back" href="https://google.com/">Â« back to Google</a>

      <!-- About window with glow wrapper -->
      <div class="window-wrapper" id="Wabout-wrapper">
        <div class="window-glow"></div>
        <div class="window" id="Wabout">
          <div class="title-bar"><span class="title">About</span></div>
          <div class="window-inner">
            <div class="desc" style="padding-top:4px;">
              <p>Hello. I'm Marcelo, the webmaster of this digital domain.</p>
              <p>Welcome to my lair. I'm an English teacher and computer science-curious netizen.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Other windows in a row -->
      <div class="other-windows">
        <div class="window-wrapper">
          <div class="window-glow"></div>
          <div class="window" id="Wgames">
            <div class="title-bar"><span class="title">Projects</span></div>
            <div class="window-inner">
              <div class="desc" style="text-align:center;">(cool and fun things)</div>
              <div class="inner">
                <div class="li">
                  <a href="https://github.com/baependi/marcelocr">
                    <img src="./iconJS.png">marcelocr
                    <div>
                      <p><b>marcelocr</b> (2024)</p>
                      <p>A JavaScript repository.</p>
                      <p>My main coding playground.</p>
                    </div>
                  </a>
                </div>
                <div class="li">
                  <a href="https://github.com/baependi/libtorrent">
                    <img src="./iconCPP.png">libtorrent
                    <div>
                      <p><b>libtorrent</b> (2024)</p>
                      <p>An efficient feature complete C++ bittorrent implementation.</p>
                      <p>Fork of arvidn/libtorrent.</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="window-wrapper">
          <div class="window-glow"></div>
          <div class="window" id="Wtoys">
            <div class="title-bar"><span class="title">Tools &amp; Toys</span></div>
            <div class="window-inner">
              <div class="desc" style="text-align:center;">(stuff that makes stuff)</div>
              <div class="inner">
                <div class="li">
                  <a href="#" onclick="var dw = document.getElementById('debug-window'); var ds = document.getElementById('debug-status'); dw.style.display = dw.style.display === 'none' ? 'block' : 'none'; ds.textContent = dw.style.display === 'none' ? 'OFF' : 'ON'; return false;">
                    <img src="./iconWIP.png">Debug Toggle
                    <div>
                      <p><b>Debug Toggle</b></p>
                      <p>Show/hide debug panel.</p>
                      <p>Currently: <span id="debug-status">OFF</span></p>
                    </div>
                  </a>
                </div>
                <div class="li">
                  <a href="#">
                    <img src="./iconWIP.png">[Coming Soon]
                    <div>
                      <p><b>[Coming Soon]</b></p>
                      <p>More stuff to come...</p>
                      <p>Stay tuned!</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="window-wrapper">
          <div class="window-glow"></div>
          <div class="window" id="Wexps">
            <div class="title-bar"><span class="title">Experiments</span></div>
            <div class="window-inner">
              <div class="desc" style="text-align:center;">(unfinished, broken,<br>or just plain bad)</div>
              <div class="inner">
                <div class="li">
                  <a href="#">
                    <img src="./iconWIP.png">Experiment #1
                    <div>
                      <p><b>Experiment #1</b></p>
                      <p>A work in progress...</p>
                    </div>
                  </a>
                </div>
                <div class="li">
                  <a href="#">
                    <img src="./iconWIP.png">Experiment #2
                    <div>
                      <p><b>Experiment #2</b></p>
                      <p>Still cooking...</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="window-wrapper">
          <div class="window-glow"></div>
          <div class="window" id="Wlinks">
            <div class="title-bar"><span class="title">Links</span></div>
            <div class="window-inner">
              <div class="desc" style="text-align:center;">(other places you can find me)</div>
              <div class="inner">
                <div class="li">
                  <a href="https://github.com/baependi">
                    <img src="./iconGithub.png">GitHub
                    <div>
                      <p><b>My GitHub</b></p>
                      <p>Where I store my code.</p>
                    </div>
                  </a>
                </div>
                <div class="li">
                  <a href="#" id="obfuscated-email" data-user="marcelo" data-domain="ribeiro.info" onclick="var u=this.getAttribute('data-user'),d=this.getAttribute('data-domain');this.href='mailto:'+u+'@'+d;return true;">
                    <img src="./iconEmail.png">Email
                    <div>
                      <p><b>Email Me</b></p>
                      <p>Click to reveal.</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Cache debug elements (check they exist first)
    const debugEls = {};
    const debugElIds = ['debug-cursorX', 'debug-cursorY', 'debug-screenWidth', 'debug-globalNormX', 'debug-globalCurvedX', 'debug-centerX', 'debug-centerY', 'debug-distX', 'debug-distY', 'debug-influenceX', 'debug-influenceY', 'debug-influence', 'debug-gradPos', 'debug-window'];
    debugElIds.forEach(function(id) {
      debugEls[id.replace('debug-', '')] = document.getElementById(id);
    });
    const titleBars = document.querySelectorAll('.title-bar');

    // Cursor-following gradient effect - global X with per-window influence
    document.addEventListener('mousemove', function(e) {
      const cursorX = e.clientX;
      const cursorY = e.clientY;
      const screenWidth = window.innerWidth;
      const screenHeight = window.innerHeight;
      const sensitivityRadiusX = screenWidth * 1.2;
      const sensitivityRadiusY = screenHeight * 1.2;

      // Global X position with smoothstep curve (tamer at edges)
      const globalNormX = cursorX / screenWidth;
      // Smoothstep: starts slow, changes fast in middle, ends slow
      const globalCurvedX = globalNormX * globalNormX * (3 - 2 * globalNormX);

      // Update header
      const head = document.getElementById('head');
      const headRect = head.getBoundingClientRect();
      const headCenterX = headRect.left + headRect.width / 2;
      const headCenterY = headRect.top + headRect.height / 2;
      const headDistX = Math.abs(cursorX - headCenterX);
      const headDistY = Math.abs(cursorY - headCenterY);
      const headInfluenceX = Math.max(0, 1 - (headDistX / sensitivityRadiusX));
      const headInfluenceY = Math.max(0, 1 - (headDistY / sensitivityRadiusY));
      const headInfluence = Math.min(1, (headInfluenceX + headInfluenceY * 1.5) / 2);
      const headPos = 90 + (globalCurvedX - 0.5) * 180 * headInfluence;
      head.style.setProperty('--grad-pos', Math.max(0, Math.min(180, headPos)));

      // Update debug window only if visible
      if (debugEls.window.style.display !== 'none') {
        debugEls.cursorX.textContent = cursorX.toFixed(1);
        debugEls.cursorY.textContent = cursorY.toFixed(1);
        debugEls.screenWidth.textContent = screenWidth.toFixed(1);
        debugEls.globalNormX.textContent = globalNormX.toFixed(3);
        debugEls.globalCurvedX.textContent = globalCurvedX.toFixed(3);
        debugEls.centerX.textContent = headCenterX.toFixed(1);
        debugEls.centerY.textContent = headCenterY.toFixed(1);
        debugEls.distX.textContent = headDistX.toFixed(1);
        debugEls.distY.textContent = headDistY.toFixed(1);
        debugEls.influenceX.textContent = headInfluenceX.toFixed(3);
        debugEls.influenceY.textContent = headInfluenceY.toFixed(3);
        debugEls.influence.textContent = headInfluence.toFixed(3);
        debugEls.gradPos.textContent = headPos.toFixed(1);
      }

      // Update all title bars
      titleBars.forEach(function(titleBar) {
        const rect = titleBar.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const distX = Math.abs(cursorX - centerX);
        const distY = Math.abs(cursorY - centerY);
        const influenceX = Math.max(0, 1 - (distX / sensitivityRadiusX));
        const influenceY = Math.max(0, 1 - (distY / sensitivityRadiusY));
        const influence = Math.min(1, (influenceX + influenceY * 1.5) / 2);
        const pos = 90 + (globalCurvedX - 0.5) * 180 * influence;
        titleBar.style.setProperty('--grad-pos', Math.max(0, Math.min(180, pos)));
      });
    });

    // Set initial gradient position to center (90 degrees)
    document.getElementById('head').style.setProperty('--grad-pos', 90);
    titleBars.forEach(function(titleBar) {
      titleBar.style.setProperty('--grad-pos', 90);
    });
  </script>
</body>
</html>
